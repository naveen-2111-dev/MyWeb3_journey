name: Web3 Docs Maintenance Workflow

on:
  push:
    branches:
      - main
    paths:
      - '**/*.md'
  pull_request:
    paths:
      - '**/*.md'
  schedule:
    - cron: '0 0 * * *'  # Daily run for stale bot

jobs:
  markdown-lint:
    name: ğŸ“ Lint Markdown
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Lint Markdown Files
        uses: DavidAnson/markdownlint-cli2-action@v15

  link-check:
    name: ğŸ”— Check Broken Links
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Run Broken Link Checker
        uses: gaurav-nelson/github-action-markdown-link-check@v1
        with:
          use-quiet-mode: yes
          config-file: .github/markdown-link-check.json

  generate-toc:
    name: ğŸ“š Generate Table of Contents
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Auto TOC Generation
        uses: technote-space/toc-generator@v4
        with:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

  stale:
    name: ğŸ’¤ Mark Stale Issues/PRs
    runs-on: ubuntu-latest
    steps:
      - uses: actions/stale@v9
        with:
          days-before-stale: 30
          days-before-close: 7
          stale-issue-message: 'âš ï¸ This issue is stale due to 30 days of inactivity.'
          stale-pr-message: 'âš ï¸ This PR is stale due to 30 days of inactivity.'
          close-issue-message: 'â›” This issue has been closed due to inactivity.'
          close-pr-message: 'â›” This PR has been closed due to inactivity.'
